<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xhtml="true">
<head>
    <meta http-equiv="pragma" content="no-cache" />
    
    <script type="text/javascript">
        /* <![CDATA[ */
        //var debugMode = true;
        var debugMode = false;
            
        var layerId = "";
        var layerName = "";
        var metadataXML = "";
        
        // path to root of ISO metadata element MD_Metadata, required for add/delete menu
        var pathToRoot = null;
        var basicMetadataXML = "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;MD_Metadata xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.isotc211.org/2005/gmd\" xmlns:gco=\"http://www.isotc211.org/2005/gco\" xmlns:gml=\"http://www.opengis.net/gml\" xsi:schemaLocation=\"http://www.isotc211.org/2005/gmd ./ISO19139_2005-10-08/gmd/gmd.xsd\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /&gt;";
        if (true) { // switch om ISO met CEN te combineren in een metadata document 
            pathToRoot ="/metadata";
            basicMetadataXML = "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;metadata&gt;&lt;/metadata&gt;";
        }
           
        var baseURL = "./";     
        var baseFullPath = baseURL + "js/metadataEditor/";
        var mainXslFullPath = baseFullPath + "metadataEditISO19139.xsl";
        var preprocessorXslFullPath = baseFullPath + "preprocessors/metadataEditPreprocessor.xsl";			
                                                        
                
        function editMetadata() 
        { 
            var ta = document.getElementById('metadata');
            metadataXML = ta.value;
            
            // if no metadata is present we start the editor with all elements empty
            if (metadataXML == "undefined" || metadataXML == null || 
                trim(metadataXML) == "" || trim(metadataXML) == "plak hier het metadata xml") {
                metadataXML = basicMetadataXML.unescapeHTML();
            }
    
            transformXml();
        } 
        function saveMetadata() 
        { 
            addDateStampToXMLDom();
            var ta = document.getElementById('metadata');
            ta.value = xmlDoc.xml;
            
            var root = document.getElementById("edit-doc-root");
            var tc = root.getAttribute('changed');
            alert("changed: " + tc); 
            // changed op false zetten, aannemen dat save gelukt is.
            root.setAttribute('changed', false);
        } 

        /* ]]> */
    </script>	
    
    <title>B3P Metadata Editor</title>
    
    <script type="text/javascript" src="./js/metadataEditor/includes/StringBuffer.js"></script>
    <script type="text/javascript" src="./js/metadataEditor/includes/crossBrowser.js"></script>		
    <script type="text/javascript" src="./js/metadataEditor/includes/metadataEdit.js"></script>
    <script type="text/javascript" src="./js/metadataEditor/includes/metadataEditBrowser.js"></script>
    
    <script type="text/javascript" src="./js/metadataEditor/includes/generic_dhtml.js"></script>
    <script type="text/javascript" src="./js/metadataEditor/includes/generic_edit.js"></script>
    
    <script type="text/javascript" src="./js/metadataEditor/includes/nczXMLDOMWrapper.js"></script>
    <script type="text/javascript" src="./js/metadataEditor/includes/XML.Transformer.js"></script>
    
    <script type="text/javascript" src="./js/metadataEditor/includes/scriptaculous-js-1.7.0/lib/prototype.js"></script>		
    
    <link href="./styles/metadataEdit.css" rel="stylesheet" type="text/css" />
    
</head>
<body>
    <h1>B3P Metadata Editor</h1>
    <form>
        <div id="write-root" onclick="click();"></div>
        <input type="hidden" name="save" value="">
        <html:button property="saveButton" value="Opslaan" disabled="true" styleId="saveButton" onclick="checkForm(this);"/> 
        <hr/>
        <input type="button" onclick="editMetadata()" value="Edit Metadata" />
        <input type="button" onclick="saveMetadata()" value="Save Metadata" />
        <p/>
        <textarea  name="metadata" cols="80" rows="15" id="metadata">plak hier het metadata xml
        </textarea>
    </form>
    <div class="hidden">
        <!-- plus/minus images used for expanding/collapsing sections, FF only -->
        <img id="plus_img" class="plus-minus" src="<html:rewrite page='/js/metadataEditor/images/xp_plus.gif' module='' />"></img>
        <img id="minus_img" class="plus-minus" src="<html:rewrite page='/js/metadataEditor/images/xp_minus.gif' module='' />"></img>
    </div>
    
</body>
<!-- another head: prevents IE cache bug/feature -->
<head>
    <meta http-equiv="pragma" content="no-cache" />
</head>
<html>

